# ==========================================
# 1. CORE APPLICATION SETUP
# ==========================================
spring.application.name=auth-sparking
server.port=${SERVER_PORT}
application.base-url=${BASE_URL}

# ==========================================
# 2. DATABASE CONFIGURATION (PostgreSQL)
# ==========================================
# Conexión JDBC usando variables de entorno
spring.datasource.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ==========================================
# 3. JPA / HIBERNATE ??
# ==========================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.open-in-view=false

# ==========================================
# 4. FLYWAY (MIGRACIONES DE BD) ?
# ==========================================
spring.flyway.enabled=true
# Flyway usa la misma fuente de datos que la app principal
spring.flyway.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
spring.flyway.user=${DB_USER}
spring.flyway.password=${DB_PASSWORD}
spring.flyway.baseline-on-migrate=true
# ¡CUIDADO! En PROD esto debe ser FALSE. En dev permite limpiar la BD si falla el checksum.
spring.flyway.clean-disabled=false

# ==========================================
# 5. EMAIL SERVICE (Mailtrap / AWS SES / SendGrid) ?
# ==========================================
spring.mail.host=${MAIL_HOST:sandbox.smtp.mailtrap.io}
spring.mail.port=${MAIL_PORT:2525}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ==========================================
# 6. SECURITY & JWT ?
# ==========================================
application.security.jwt.secret-key=${JWT_SECRET}
application.security.jwt.expiration=${JWT_EXPIRATION}
application.security.jwt.refresh-token.expiration=${JWT_REFRESH_TOKEN_EXPIRATION}
application.security.mfa.temp-token.expiration=${JWT_TEMP_EXPIRATION}

# ==========================================
# 7. CORS (Frontend Integration) ?
# ==========================================
application.security.cors.allowed-origins=${CORS_ALLOWED_ORIGINS}